"use strict";$(function(){function e(){b.each(function(e,n){var t=$(n);t.data(A,t.attr("class")),t.data(j,e),0===e&&t.addClass("music-mind-page-current")}),$(".music-mind-page-button").on("click",function(){return n(r)}),$(".answer-section input:radio").change(u),z.click(function(){return k.flickity("previous")}),C.click(function(){return k.flickity("next")}),k.on("select.flickity",function(){var e=k.data("flickity");I.text("QUESTION #:"+(e.selectedIndex+1)),C.prop("disabled",e.selectedIndex==e.cells.length-1)}),$("#signup-form").submit(p),$("#final-signup-form").submit(p),$("#no-button").click(function(e){e.preventDefault(),n(r)})}function n(){var e=arguments.length<=0||void 0===arguments[0]?null:arguments[0],n=arguments.length<=1||void 0===arguments[1]?null:arguments[1],a=arguments.length<=2||void 0===arguments[2]?-1:arguments[2];if(q)return!1;q=!0;var r=t(),s=b.eq(r),o=a>-1?E>a?a:0:E-1>r?r+1:0,u=b.eq(o).addClass("music-mind-page-current"),c=o>r?"moveToTop":"moveToBottom",d=o>r?"moveFromBottom":"moveFromTop";e&&e(r,o),s.addClass(c).on(D,function(){s.off(D),M=!0,F&&i(s,u,n)}),u.show(),u.addClass(d).on(D,function(){u.off(D),F=!0,M&&i(s,u,n)}),G||i(s,u,n)}function t(){return parseInt($(".music-mind-page-current").data(j))}function i(e,n,t){M=!1,F=!1,a(e,n),q=!1,t&&t()}function a(e,n){e.attr("class",e.data(A)),e.hide(),n.attr("class",n.data(A)+" music-mind-page-current")}function r(e,n){switch(n){case 1:s();break;case 3:l();break;case 4:L&&($("#final-cta").hide(),$("#final-message").show())}}function s(){var e=k.data("flickity").cells.length,n=g[e],t=(g.length-e)/g.length*100,i=o(e+1,n.text,n.mindType);return k.flickity("append",i),k.flickity("next"),w.animate({width:100-t+"%"},"slow"),i}function o(e,n,t){var i=("tie-breaker"===t?x:T).clone().show(),a="tie-breaker"===t?"tie-breaker-answer":"question-"+e+"-answer";return i.find("h2").text("Question "+e),i.find("p").text(n),i.find("div.answer-section").addClass(t).find("input:radio").each(function(e,n){return $(n).change(u).attr("name",a)}),i}function u(e){var t=$(e.currentTarget).attr("name");"tie-breaker-answer"===t?n():window.setTimeout(s,1e3)}function c(){var e=function(e,n){return e+n},n=function(e){return $(e+" input:checked").map(function(e,n){return parseInt($(n).val())}).get()};return{eye:n(".eye").reduce(e),ear:n(".ear").reduce(e),create:n(".create").reduce(e)}}function d(){var e=$("div.tie-breaker input:checked").val(),n=c();n[e]++;var t=Object.keys(n).reduce(function(e,t){return n[e]>n[t]?e:t}),i=[];for(var a in n)i.push([a,n[a]]);i.sort(function(e,n){return e[1]-n[1]});var r=i.reduce(function(e,n){return e[n[0]]=n[1],e},{});return{mindType:t,breakdown:r}}function l(){var e=d(),n=["small","med","large"];for(var t in e.breakdown){$("#"+t+"-result").text(e.breakdown[t]);var i=n.shift();$("#"+t+"-result").addClass(i),$("#li-"+t+"-result").addClass(i);e.mindType+"-"+i}$(".results-bar").addClass("results-"+e.mindType),$(".results-icon").addClass("white-"+e.mindType),$(".music-mind-result-icon").addClass("icon-"+e.mindType),$(".music-mind-result").append(e.mindType),h[e.mindType].forEach(function(e){return $("#strengths-list").append("<li>"+e+"</li>")}),addthis_share.title=v[e.mindType]+" Take this quiz to find yours!",addthis_share.passthrough={twitter:{text:"I have "+message[e.mindType]+" music mind! Find out yours at pazumusic.com/music-mind"}}}function m(e){var n=/^([a-zA-Z0-9_.+-])+\@(([a-zA-Z0-9-])+\.)+([a-zA-Z0-9]{2,4})+$/;return n.test(e)}function f(e,n,t){var i=d(),a="https://pazumusic.us13.list-manage.com/subscribe/post-json?u=97e39215ad5ad59c825210614&id=855559e5b6",r=e.serialize()+("&MMIND="+i.mindType);$.get({url:a,data:r,cache:!1,dataType:"jsonp",jsonp:"c",contentType:"application/json; charset=utf-8",error:function(e){return alert("Could not connect to the registration server. Please try again later.")},success:function(e){return"success"!=e.result?t(e):n()}})}function p(e){e.preventDefault();var t=$(e.currentTarget),i=t.find("input[name=EMAIL]"),a=t.find("#error-response");return m(i.val())?(i.css("border","1px solid #aaa"),a.hide(),f(t,function(){L=!0,n(r)},function(e){alert("Looks like there was an issue signing you up: "+e.msg)}),void 0):(i.css("border","1px solid #ff0000"),void a.show())}var g=[{mindType:"ear",text:"I learn well by listening to others."},{mindType:"create",text:"I find myself daydreaming often."},{mindType:"eye",text:"I enjoy getting lost in a good book."},{mindType:"create",text:"I don't like it when rules and structure are in place."},{mindType:"ear",text:"I like to sing songs."},{mindType:"eye",text:"I enjoy writing in a journal or diary."},{mindType:"create",text:"I enjoy thinking of new ways to do simple tasks."},{mindType:"eye",text:"I love to navigate and read maps."},{mindType:"ear",text:"I find it easy to memorize melodies and lyrics."},{mindType:"tie-breaker",text:"If you were going to learn a song right now, which way would you prefer?"}],y={WebkitAnimation:"webkitAnimationEnd",OAnimation:"oAnimationEnd",msAnimation:"MSAnimationEnd",animation:"animationend"},h={eye:["Great at following directions","Can easily visualize the notes","Great sense of musical balance","Notices small differences in written music"],ear:["Can easily remember melodies and lyrics","Frequently humming or singing music","Learns better while studying to music","Prefers to find notes by listening rather than reading"],create:["Very imaginative and inventive","Great sense of self-awareness","Enjoys finding new ways to sing or play songs","Expression is always an important factor"]},v={create:"I have a CREATE music mind! This means that I like to learn music by experimenting with sounds and excel at creating original songs.",ear:"I have an EAR music mind! This means that I like to learn music by listening to the notes and excel at matching rhythm and pitch.",eye:"I have an EYE music mind! This means that I like to learn music by reading it on sheet music and excel at recognizing visual patterns and small details."},k=$(".main-carousel").flickity(),w=$(".progress-bar-fill"),b=$(".music-mind-container").children("div.music-mind-page"),T=$("#quiz-question-template"),x=$("#tie-breaker-template"),I=$("#question-number"),C=$("#next-question"),z=$("#prev-question"),E=b.length,A="originalClassList",j="pageIndex",q=!1,M=!1,F=!1,L=!1,D=y[Modernizr.prefixed("animation")],G=Modernizr.cssanimations;e()});
